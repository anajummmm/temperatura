<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Monitor IoT - Temperatura e Umidade</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="card">
    <h1>ðŸ“¡ Sensor DHT11</h1>
    <div class="info" id="temperatura">Temperatura: -- Â°C</div>
    <div class="info" id="umidade">Umidade: -- %</div>
    <div class="atualizando" id="atualizando">Atualizando...</div>
  </div>

  <script>
    const IP_ESP32 = "http://10.87.148.22/dados";

    async function buscarDados() {
      try {
        const resposta = await fetch(IP_ESP32);
        const dados = await resposta.json();

        document.getElementById("temperatura").textContent = `Temperatura: ${dados.temperatura} Â°C`;
        document.getElementById("umidade").textContent = `Umidade: ${dados.umidade} %`;
        document.getElementById("atualizando").textContent = `Ãšltima atualizaÃ§Ã£o: ${new Date().toLocaleTimeString()}`;
      } catch (erro) {
        console.error("Erro ao buscar dados do ESP32:", erro);
        document.getElementById("temperatura").textContent = "Temperatura: -- Â°C";
        document.getElementById("umidade").textContent = "Umidade: -- %";
        document.getElementById("atualizando").textContent = "Erro na atualizaÃ§Ã£o";
      }
    }

    buscarDados();
    setInterval(buscarDados, 30000);
  </script>
</body>
</html>
